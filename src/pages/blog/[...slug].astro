---
import BlogLayout from "../../layouts/BlogLayout.astro";
import BlogPost from "../../layouts/BlogPost.astro";
import { getCollection } from 'astro:content';
import global_settings from "../../data/global_settings.json"
import BlogPostCard from "../../components/BlogPostCard.astro";
import PostList from "../../components/PostList.astro";

import { render } from 'astro:content';

export async function getStaticPaths() {
	const posts = await getCollection('blog');
	return posts.map((post) => ({
		params: { slug: post.id },
		props: post,
	}));
}

type Props = CollectionEntry<'blog'>;

const post = Astro.props;
console.log(post);
const { Content } = await render(post);

const title = post.data.title+" | "+global_settings.title;
const keywords = post.data.keywords;
const description = post.data.description;

---

<BlogLayout data={post.data} title={title} keywords={keywords} description={description}>

    <BlogPost {...post.data} data={post.data}>
	    <Content />
    </BlogPost>

</BlogLayout>
